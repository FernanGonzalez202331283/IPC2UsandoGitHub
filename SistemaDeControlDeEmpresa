-- CREACION DE BASE DE DATOS SISTEMA DE CONTROL DE UNA EMPRESA
CREATE DATABASE SistemaDeControlDeEmpresa;

-- SELECCIONAR LA BASE DE DATOS
USE SistemaDeControlDeEmpresa;

-- CREACION DE LA TABLA SUCURSAL
CREATE TABLE Sucursal(
    idSucursal INT PRIMARY KEY AUTO_INCREMENT,
    ubicacion VARCHAR(100) NOT NULL
);

-- CREACION DE LA TABLA EMPLEADO
CREATE TABLE Empleado (
    idEmpleado INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(100) NOT NULL,
    cargo VARCHAR(100),
    idSucursal INT,
    FOREIGN KEY (idSucursal) REFERENCES Sucursal(idSucursal)
);

-- CREACION DE LA TABLA CLIENTE
CREATE TABLE Cliente (
    idCliente INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(100) NOT NULL,
    direccion VARCHAR(150),
    tipoDeCliente ENUM('Individual','Corporativo')
);

-- CREACION DE LA TABLA PROVEEDOR
CREATE TABLE Proveedor (
    idProveedor INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(100) NOT NULL,
    direccion VARCHAR(150),
    contacto VARCHAR(50)
);

-- CREACION DE LA TABLA PRODUCTO
CREATE TABLE Producto (
    codigo INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR (100) NOT NULL,
    descripcion TEXT,
    precioUnitario DECIMAL (10,2),
    stock INT
);

-- CRACION DE LA TABLA PEDIDO
CREATE TABLE Pedido (
    idPedido INT PRIMARY KEY AUTO_INCREMENT,
    fecha DATE,
    idCliente INT,
    idEmpleado INT,
    FOREIGN KEY (idCliente) REFERENCES Cliente(idCliente),
    FOREIGN KEY (idEmpleado) REFERENCES Empleado(idEmpleado)
);

-- CREACION DE TABLA PROVEEDOR-PRODUCTO
CREATE  TABLE Proveedor_Producto(
    idProveedor INT,
    codigo INT,
    PRIMARY KEY(idProveedor, codigo),
    FOREIGN KEY (idProveedor) REFERENCES Proveedor(idProveedor),
    FOREIGN KEY (codigo) REFERENCES Producto(codigo)
);

-- CREACION DE LA TABLA PRODUCTO
CREATE TABLE Pedido_Producto(
    idPedido INT,
    codigo INT,
    cantidad INT,
    PRIMARY KEY (idPedido, codigo),
    FOREIGN KEY (idPedido) REFERENCES Pedido(idPedido),
    FOREIGN KEY (codigo) REFERENCES Producto(codigo)
);

-- CREACION DE LA TABLA FACTURA
CREATE TABLE Factura (
    idFactura INT PRIMARY KEY AUTO_INCREMENT,
    fechaEmision DATE,
    montoTotal DECIMAL(10,2),
    estadoPago ENUM('Pendiente','Pagado'),
    idPedido INT,
    idCliente INT,
    idEmpleado INT,
    FOREIGN KEY (idPedido) REFERENCES Pedido(idPedido),
    FOREIGN KEY (idCliente) REFERENCES Cliente(idCliente),
    FOREIGN KEY (idEmpleado) REFERENCES Empleado(idEmpleado)
);

-- INSERTAR DATOS A LA TABLA SUCURSAL
INSERT INTO Sucursal (ubicacion) VALUES
('San Marcos'),
('Quetzaltenango'),
('Ciudad de Guatemala'),
('Péten');

-- INSERTAR DATOS A LA TABLA PROVEEDOR
INSERT INTO Proveedor (nombre, direccion, contacto) VALUES
('Import Gt', 'ZONA 18 de Guatemala', '40321075'),
('Mundo Digital', 'ZONA 1 de San Marcos', '10850415'),
('Import tecnology', 'ZONA 2 de Péten', '50750332');

-- INSERTAR DATOS A LA TABLA DE CLIENTE
INSERT INTO Cliente(nombre, direccion, tipoDeCliente) VALUES
('Fernan Gonzalez','ZONA 3 De San Marcos','Individual'),
('Lucas Fuentes','ZONA 5 De Guatemala', 'Corporativo'),
('Belinda Vasquez','Zona 3 De Quetzaltenango','Corporativo');

-- INSERTAR DATOS A LA TABLA DE EMPLEADO
INSERT INTO Empleado(nombre, cargo, idSucursal) VALUES
('Ana Vasques','Administrador','1'),
('Facundo Gonzalez','Administrador','3'),
('Horacio Fuentes','Vendedor','2');

-- INSERTAR DATOS A LA TABLA DE PRODUCTO
INSERT INTO Producto(nombre, descripcion,precioUnitario,stock) VALUES
('Laptop HP', 'Laptop 16GB RAM', 6500.00, 10),
('Mouse Logitech', 'Mouse inalámbrico', 150.00, 50),
('Teclado Redragon', 'Teclado mecánico RGB', 300.00, 30),
('Monitor Samsung', 'Monitor 24 pulgadas', 1200.00, 15);

-- INSERTAR PEDIDOS
INSERT INTO Proveedor_Producto(idProveedor, codigo) VALUES
(1,1),
(1,2),
(2,3),
(2,4);

-- INSERTAR DATOS A LA TABLA DE PRODUCTO
INSERT INTO Pedido(fecha, idCliente, idEmpleado) VALUES
('2026-02-15', 1, 1),
('2026-02-16', 2, 2),
('2026-02-17', 3, 1);

-- INSERTAR A LA TABLA DE PEDIDO PRODUCTO
INSERT INTO Pedido_Producto (idPedido, codigo, cantidad) VALUES
(1, 1, 1),
(1, 2, 2),
(2, 3, 1),
(3, 4, 1),
(3, 2, 1);

-- INSERTAR A LA TABLA DE FACTURA
INSERT INTO Factura (fechaEmision, montoTotal, estadoPago, idPedido,idCliente, idEmpleado) VALUES
('2026-02-15', 6800.00, 'Pagado', 1, 1, 1),
('2026-02-16', 300.00, 'Pendiente', 2, 2, 2),
('2026-02-17', 1350.00, 'Pagado', 3, 3, 1);
